"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7229],{7229:(U,u,c)=>{c.d(u,{i:()=>J});var t=c(9212),d=c(3830),m=c(5370),h=c(6814),r=c(451);function f(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"ion-button",3),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.action(s.parameter))}),t._uU(1),t.qZA()}if(2&e){const i=t.oxw();t.xp6(),t.hij(" ",i.title,"\n")}}function y(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"ion-fab-button",4),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.action(s.parameter))}),t._UZ(1,"ion-icon",5),t.qZA()}if(2&e){const i=t.oxw();t.xp6(),t.s9C("name",i.icon)}}function _(e,o){1&e&&(t.TgZ(0,"ion-button",6),t._UZ(1,"ion-spinner",7),t.qZA())}let g=(()=>{var e;class o{constructor(){this.title="",this.parameter=null,this.icon=null,this.isLoading=!1}ngOnInit(){}}return(e=o).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["button-component"]],inputs:{title:"title",action:"action",parameter:"parameter",icon:"icon",isLoading:"isLoading"},decls:3,vars:3,consts:[["expand","block",3,"click",4,"ngIf"],["slot","slot",3,"click",4,"ngIf"],["expand","block",4,"ngIf"],["expand","block",3,"click"],["slot","slot",3,"click"],[3,"name"],["expand","block"],["name","crescent"]],template:function(n,s){1&n&&t.YNc(0,f,2,1,"ion-button",0)(1,y,2,1,"ion-fab-button",1)(2,_,2,0,"ion-button",2),2&n&&(t.Q6J("ngIf",!s.icon&&!s.isLoading),t.xp6(),t.Q6J("ngIf",s.icon&&!s.isLoading),t.xp6(),t.Q6J("ngIf",s.isLoading))},dependencies:[r.YG,r.W4,r.gu,r.PQ,h.O5],styles:[".center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),o})();var a=c(6825);let b=(()=>{var e;class o{constructor(){this.players=[],this.filterPlayers=[],this.repeat=!0,this.diceState="normal",this.isVisible="visible",this.isLocked=!1,this.facesMapping=[]}ngOnInit(){}ngAfterViewInit(){this.diceContent=document.getElementById("diceContent"),this.dice=document.getElementById("dice"),this.faces=Array.from(document.getElementsByClassName("face"))}diceRotate(){if(0==this.players.length||this.isLocked)return;this.allPlayersFinished()&&this.setState("finish"),this.diceState="normal"===this.diceState?"rotate":"normal",this.setHelpMsg("\xbfPreparados?..."),setTimeout(()=>{this.setHelpMsg("Ah\xed va!!!...")},1e3),this.setFacesMapping(this.players);const n="rotate"==this.diceState?this.facesMapping[4].name:this.facesMapping[0].name;setTimeout(()=>{"dice"===this.gameStatus.state&&(this.isVisible="hidden")},3e3),setTimeout(()=>{"dice"===this.gameStatus.state&&(this.gameStatus.player=n),"dice"===this.gameStatus.state&&this.setState("task")},4e3),this.isLocked=!0}setFacesMapping(n){let s;if(s=this.repeat?[...n].sort(()=>Math.random()-.5).slice(0,6):[...n.filter(p=>!this.filterPlayers.includes(p))].sort(()=>Math.random()-.5).slice(0,6),0==s.length)return!1;let l=0;this.facesMapping=[];for(let p=0;p<=5;p++)s[l]||(l=0),this.facesMapping[p]={name:s[l]},this.faces[p].innerText=s[l],l++;return!0}}return(e=o).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["dice-component"]],inputs:{players:"players",filterPlayers:"filterPlayers",repeat:"repeat",gameStatus:"gameStatus",setHelpMsg:"setHelpMsg",setState:"setState",allPlayersFinished:"allPlayersFinished"},decls:29,vars:2,consts:[["id","diceContent",1,"container"],["diceContent",""],[1,"dice-content"],["id","dice",1,"dice",3,"click"],["dice",""],["id","face1",1,"face","truncate"],["color","tertiary"],["id","face2",1,"face","truncate"],["id","face3",1,"face","truncate"],["id","face4",1,"face","truncate"],["id","face5",1,"face","truncate"],["id","face6",1,"face","truncate"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3,4),t.NdJ("click",function(){return s.diceRotate()}),t.TgZ(5,"div",5)(6,"ion-text",6)(7,"strong"),t._uU(8," ? "),t.qZA()()(),t.TgZ(9,"div",7)(10,"ion-text",6)(11,"strong"),t._uU(12," ? "),t.qZA()()(),t.TgZ(13,"div",8)(14,"ion-text",6)(15,"strong"),t._uU(16," ? "),t.qZA()()(),t.TgZ(17,"div",9)(18,"ion-text",6)(19,"strong"),t._uU(20," ? "),t.qZA()()(),t.TgZ(21,"div",10)(22,"ion-text",6)(23,"strong"),t._uU(24," ? "),t.qZA()()(),t.TgZ(25,"div",11)(26,"ion-text",6)(27,"strong"),t._uU(28," ? "),t.qZA()()()()()()),2&n&&(t.Q6J("@disappear",s.isVisible),t.xp6(3),t.Q6J("@rotation",s.diceState))},dependencies:[r.yW],styles:[".container[_ngcontent-%COMP%]{height:300px}.dice-content[_ngcontent-%COMP%]{margin-top:80px;height:200px}#diceContent[_ngcontent-%COMP%]{transition:opacity 1s,height 1s}.center[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}h1[_ngcontent-%COMP%]{font-size:2rem}.dice[_ngcontent-%COMP%]{left:50%;translate:-50%;width:200px;height:200px;position:absolute;transform-style:preserve-3d;transform:rotateX(-15deg) rotateY(-15deg);cursor:pointer}.face[_ngcontent-%COMP%]{width:200px;height:200px;position:absolute;background-color:#a8b0ff;border:.5px solid #000;font-size:20px;line-height:100px;display:flex;justify-content:center;align-items:center;color:#000}#face1[_ngcontent-%COMP%]{transform:rotateX(0) translateZ(100px)}#face2[_ngcontent-%COMP%]{transform:rotateX(90deg) translateZ(100px)}#face3[_ngcontent-%COMP%]{transform:rotateX(180deg) translateZ(100px)}#face4[_ngcontent-%COMP%]{transform:rotateX(270deg) translateZ(100px)}#face5[_ngcontent-%COMP%]{transform:rotateY(90deg) translateZ(100px)}#face6[_ngcontent-%COMP%]{transform:rotateY(270deg) translateZ(100px)}"],data:{animation:[(0,a.X$)("rotation",[(0,a.SB)("normal",(0,a.oB)({transform:"rotateX(-5deg) rotateY(-5deg)"})),(0,a.SB)("rotate",(0,a.oB)({transform:"rotateX(-1795deg) rotateY(275deg)"})),(0,a.eR)("normal => rotate",(0,a.jt)("2s ease-out")),(0,a.eR)("rotate => normal",(0,a.jt)("2s ease-out"))]),(0,a.X$)("disappear",[(0,a.SB)("visible",(0,a.oB)({opacity:1,height:"*",display:"block"})),(0,a.SB)("hidden",(0,a.oB)({opacity:0,height:"0",display:"none"})),(0,a.eR)("visible => hidden",[(0,a.jt)("1s")]),(0,a.eR)("hidden => visible",[(0,a.jt)("1s")])])]}}),o})();var x=c(5861),P=c(8188);function S(e,o){if(1&e&&t._UZ(0,"item-component",13),2&e){const i=t.oxw();t.Q6J("label","Sitio")("text",i.gameStatus.site.title)}}function M(e,o){if(1&e&&t._UZ(0,"item-component",13),2&e){const i=t.oxw();t.Q6J("label","Situacion")("text",i.gameStatus.situation.title)}}function C(e,o){if(1&e&&t._UZ(0,"item-component",13),2&e){const i=t.oxw();t.Q6J("label","Tema")("text",i.gameStatus.teme.title)}}let T=(()=>{var e;class o{constructor(){this.players=[],this.filterPlayers=[],this.repeat=!0,this.content={},this.listVisible="hidden",this.buttonVisible="hidden",this.buttonLoading=!1,this.isLocked=!1,this.taskAssign=()=>{this.isLocked||(this.gameStatus.site=this.contents.sites[Math.floor(Math.random()*this.contents.sites.length)],this.gameStatus.situation=this.contents.situations[Math.floor(Math.random()*this.contents.situations.length)],this.gameStatus.teme=this.contents.temes[Math.floor(Math.random()*this.contents.temes.length)],this.repeat||this.filterPlayers.push(this.gameStatus.player),this.buttonLoading=!0,setTimeout(()=>{this.listVisible="visible"},500),setTimeout(()=>{this.buttonVisible="hidden"},1e3),setTimeout(()=>{"task"===this.gameStatus.state&&this.setHelpMsg(`Excelente ${this.gameStatus.player}!, ahora resuelve el tema, mucho exito. Cuando termines puedes volver a lanzar el dado para que otro participante tambien tenga oportunidad.`)},2100),this.isLocked=!0)},this.newRelease=()=>{this.allPlayersFinished()?this.setState("finish"):this.setState("dice")}}ngOnInit(){var n=this;return(0,x.Z)(function*(){n.buttonVisible="visible"})()}}return(e=o).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["task-component"]],inputs:{gameStatus:"gameStatus",contents:"contents",players:"players",filterPlayers:"filterPlayers",repeat:"repeat",setHelpMsg:"setHelpMsg",setState:"setState",allPlayersFinished:"allPlayersFinished"},decls:16,vars:13,consts:[[1,""],["size","12"],[1,"d-flex","between"],["color","tertiary",1,"d-flex","center","m-5","bold"],[1,"player"],[1,"d-flex","center"],[3,"title","action","icon","slot"],["id","taskassign",1,"d-flex","center","m-5"],["taskassign",""],[3,"title","parameter","action","isLoading"],["id","tasklist"],["tasklist",""],[3,"label","text",4,"ngIf"],[3,"label","text"]],template:function(n,s){1&n&&(t.TgZ(0,"ion-row",0)(1,"ion-col",1)(2,"ion-card",2)(3,"ion-text",3)(4,"h1",4),t._uU(5),t.qZA()(),t.TgZ(6,"div",5),t._UZ(7,"button-component",6),t.qZA()(),t.TgZ(8,"div",7,8),t._UZ(10,"button-component",9),t.qZA(),t.TgZ(11,"ion-list",10,11),t.YNc(13,S,1,2,"item-component",12)(14,M,1,2,"item-component",12)(15,C,1,2,"item-component",12),t.qZA()()()),2&n&&(t.xp6(5),t.Oqu(s.gameStatus.player),t.xp6(2),t.Q6J("title","Volver a tirar dado")("action",s.newRelease)("icon","refresh")("slot","end"),t.xp6(),t.Q6J("@disappear",s.buttonVisible),t.xp6(2),t.Q6J("title","Asignar la tarea de "+s.gameStatus.player)("action",s.taskAssign)("isLoading",s.buttonLoading),t.xp6(),t.Q6J("@disappear",s.listVisible),t.xp6(2),t.Q6J("ngIf",s.gameStatus.site),t.xp6(),t.Q6J("ngIf",s.gameStatus.situation),t.xp6(),t.Q6J("ngIf",s.gameStatus.teme))},dependencies:[r.PM,r.wI,r.q_,r.Nd,r.yW,h.O5,g,P.P],styles:[".center[_ngcontent-%COMP%]{justify-content:center;align-items:center}.d-flex[_ngcontent-%COMP%]{display:flex}.between[_ngcontent-%COMP%]{justify-content:space-between}.m-5[_ngcontent-%COMP%]{margin:5px}.bold[_ngcontent-%COMP%]{font-weight:700}#taskassign[_ngcontent-%COMP%], .transition[_ngcontent-%COMP%]{transition:opacity 1s,height 1s}.player[_ngcontent-%COMP%]{font-size:50px}"],data:{animation:[(0,a.X$)("disappear",[(0,a.SB)("visible",(0,a.oB)({display:"block",opacity:1,height:"*"})),(0,a.SB)("hidden",(0,a.oB)({opacity:0,height:"0",display:"none"})),(0,a.eR)("visible => hidden",[(0,a.jt)("1s")]),(0,a.eR)("hidden => visible",[(0,a.jt)("1s")])])]}}),o})();function Z(e,o){if(1&e&&(t.TgZ(0,"ion-text")(1,"h1"),t._uU(2),t.qZA()()),2&e){const i=t.oxw();t.xp6(2),t.Oqu(i.help.msg)}}function v(e,o){1&e&&(t.TgZ(0,"ion-text",12)(1,"h1"),t._uU(2,"Debes agregar participantes en configuracion para poder lanzar el dado."),t.qZA()())}function k(e,o){if(1&e&&(t.TgZ(0,"div")(1,"ion-text",13)(2,"h1"),t._uU(3,"Felicidades!, todos los participantes han tenido su turno, puedes volver a iniciar o a\xf1adir m\xe1s participantes."),t.qZA()(),t._UZ(4,"button-component",14),t.qZA()),2&e){const i=t.oxw();t.xp6(4),t.Q6J("title","Volver a empezar")("action",i.resetFilterPlayers)}}function O(e,o){if(1&e&&t._UZ(0,"dice-component",15),2&e){const i=t.oxw();t.Q6J("players",i.players)("filterPlayers",i.filterPlayers)("repeat",i.repeat)("gameStatus",i.gameStatus)("setHelpMsg",i.setHelpMsg)("setState",i.setState)("allPlayersFinished",i.allPlayersFinished)}}const A=(e,o,i)=>({sites:e,situations:o,temes:i});function F(e,o){if(1&e&&t._UZ(0,"task-component",16),2&e){const i=t.oxw();t.Q6J("players",i.players)("filterPlayers",i.filterPlayers)("repeat",i.repeat)("gameStatus",i.gameStatus)("setHelpMsg",i.setHelpMsg)("setState",i.setState)("allPlayersFinished",i.allPlayersFinished)("contents",t.kEZ(8,A,i.sites,i.situations,i.temes))}}let J=(()=>{var e;class o{constructor(n,s){this.store=n,this.fireDatabase=s,this.appTitle="",this.subs=[],this.players=[],this.filterPlayers=[],this.sites=[],this.situations=[],this.temes=[],this.gameStatus={},this.help={isActive:!0,msg:""},this.repeat=!0,this.resetFilterPlayers=()=>{this.filterPlayers=[],this.gameStatus.state="dice"},this.resetGameStatus=()=>{this.gameStatus={player:null,site:null,situation:null,teme:null,state:"dice"},this.setHelpMsg("Toca el dado para lanzar")},this.resetGame=()=>{this.resetGameStatus(),this.resetFilterPlayers()},this.setHelpMsg=l=>{this.help.msg=l},this.setState=l=>{"dice"===l?(this.gameStatus.state="dice",this.setHelpMsg("Toca el dado para lanzar")):"task"===l?(this.gameStatus.state="task",this.setHelpMsg(`Muy bien!, ahora, asigna la tarea de ${this.gameStatus.player}.`)):"finish"===l&&(this.gameStatus.state="finish",this.setHelpMsg(""))},this.allPlayersFinished=()=>{for(const l of this.players)if(!this.filterPlayers.includes(l))return!1;return!0},this.config$=this.store.select("config")}ngOnInit(){this.getStore(),this.subs.push(this.fireDatabase.getCollection("sites").subscribe(n=>this.sites=n)),this.subs.push(this.fireDatabase.getCollection("situations").subscribe(n=>this.situations=n)),this.subs.push(this.fireDatabase.getCollection("temes").subscribe(n=>this.temes=n)),this.resetGame()}ngOnDestroy(){this.subs.forEach(n=>n.unsubscribe())}ionViewWillEnter(){(!this.allPlayersFinished()||this.repeat)&&"finish"===this.gameStatus.state&&this.setState("dice"),!this.repeat&&this.allPlayersFinished()&&0!==this.players.length&&"dice"===this.gameStatus.state&&this.setState("finish"),0===this.players.length&&this.setState("noPlayers"),this.repeat&&(this.filterPlayers=[])}getStore(){this.subs.push(this.config$.subscribe(({appTitle:n,players:s,repeat:l,help:p,sites:I,situations:w,temes:Q})=>{this.appTitle=n,this.players=s,this.repeat=l,this.sites=I,this.situations=w,this.temes=Q,this.help.isActive=p}))}}return(e=o).\u0275fac=function(n){return new(n||e)(t.Y36(d.yh),t.Y36(m.u))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-game"]],decls:19,vars:8,consts:[[3,"translucent"],["color","tertiary"],[3,"fullscreen"],[1,"ion-justify-content-center"],["size","12","size-sm","12","size-md","10","size-lg","8"],["collapse","condense"],["color","tertiary","size","large"],[1,"ion-padding","content"],[4,"ngIf"],["color","danger",4,"ngIf"],[3,"players","filterPlayers","repeat","gameStatus","setHelpMsg","setState","allPlayersFinished",4,"ngIf"],[3,"players","filterPlayers","repeat","gameStatus","setHelpMsg","setState","allPlayersFinished","contents",4,"ngIf"],["color","danger"],["color","warning"],[3,"title","action"],[3,"players","filterPlayers","repeat","gameStatus","setHelpMsg","setState","allPlayersFinished"],[3,"players","filterPlayers","repeat","gameStatus","setHelpMsg","setState","allPlayersFinished","contents"]],template:function(n,s){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),t._uU(3,"JUGAR"),t.qZA()()(),t.TgZ(4,"ion-content",2)(5,"ion-row",3)(6,"ion-col",4)(7,"ion-header",5)(8,"ion-toolbar")(9,"ion-card-subtitle"),t._uU(10),t.qZA(),t.TgZ(11,"ion-card-title",6),t._uU(12,"JUGAR"),t.qZA()()(),t.TgZ(13,"ion-card",7),t.YNc(14,Z,3,1,"ion-text",8)(15,v,3,0,"ion-text",9)(16,k,5,2,"div",8)(17,O,1,7,"dice-component",10)(18,F,1,12,"task-component",11),t.qZA()()()()),2&n&&(t.Q6J("translucent",!0),t.xp6(4),t.Q6J("fullscreen",!0),t.xp6(6),t.Oqu(s.appTitle),t.xp6(4),t.Q6J("ngIf",s.help.isActive&&"finish"!==s.gameStatus.state&&0!==s.players.length),t.xp6(),t.Q6J("ngIf",0==s.players.length),t.xp6(),t.Q6J("ngIf","finish"==s.gameStatus.state&&s.allPlayersFinished()&&0!==s.players.length),t.xp6(),t.Q6J("ngIf","dice"==s.gameStatus.state&&0!==s.players.length),t.xp6(),t.Q6J("ngIf","task"==s.gameStatus.state&&0!==s.players.length))},dependencies:[h.O5,r.PM,r.tO,r.Dq,r.wI,r.W2,r.Gu,r.Nd,r.yW,r.wd,r.sr,g,b,T],styles:[".dice-content[_ngcontent-%COMP%]{background-color:#a8b0ff;height:15rem;border-radius:20px}.button-dice-container[_ngcontent-%COMP%]{margin-top:10%}.dice-value-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 auto;height:100%!important}.dice-value[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:180px}.dice-value-description[_ngcontent-%COMP%]{color:#fff;font-size:15px;text-align:center;margin:8px}.ion-text[_ngcontent-%COMP%]{font-weight:700}.content[_ngcontent-%COMP%]{min-height:70vh}"]}),o})()}}]);